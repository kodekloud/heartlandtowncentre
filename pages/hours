<h1>Shopping Hours</h1>
<br>

<h2>Regular Hours</h2>
<table id="reg_table">
    <script id="reg_template" type="x-tmpl-mustache/text">
        <tr>
            <td class='hour_col_1'>
                {{day}}
            </td>
            <td class='hour_col_2'>
                {{hour_string}}
            </td>
            <td class='hour_col_3'>
                
            </td>
        </tr>
    </script>
</table>
<br>

<h2>Holiday Hours</h2>
<table id="hol_table">
    <script id="hol_template" type="x-tmpl-mustache/text">
        <tr>
            <td class='hour_col'>
                {{holiday_name}}
            </td>
            <td class='hour_col'>
                {{hol}}
            </td>
            <td class='hour_col'>
                {{hour_string}}
            </td>
        </tr>
    </script>
</table>




<script>
    $(document).ready(function() {
        function renderAll(){
            var hours = getPropertyHours();
            reg_hours = []
            holiday_hours = []
            $.each( hours , function( key, val ) {
                if (val.day_of_week == 0){
                    val.day_of_week = 7;
                }
                hour_string = get_hour_string(val.day_of_week, val.open_time, val.close_time, val.is_closed)
                val.day = hour_string['day']
                val.hour_string = hour_string['detail']
                if (val.store_id == null && val.is_holiday == false){
                    reg_hours.push(val)
                }
                if (val.store_id == null && val.is_holiday == true){
                    hol = new Date (val.holiday_date);
                    hol.setDate(hol.getDate()+1);
                    val.hol = (get_month(hol.getMonth()))+" "+(hol.getDate());   
                    holiday_hours.push(val)
                }
            })
            renderPageData("#reg_table", "#reg_template", reg_hours, "hours")
            renderPageData("#hol_table", "#hol_template", holiday_hours, "hours")
            $(".loading_overlay").hide();
        }
        
        
        loadMallDataCached(renderAll); 
        // loadMallData(renderAll); 
    });
    
</script>