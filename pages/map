<div class="store_select">
    <select id="store_select_container" onchange="javascript:drop_pin(this.value)">
        <script id="store_select_template" type="x-tmpl-mustache/text">
            <option value='{{svgmap_region}}/{{slug}}'>{{name}}</option>
        </script>
    </select>
</div>




<div class="map_container" id="mapsvg"></div>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.4/raphael-min.js"></script>
<script type="text/javascript" src="http://assets.kodekloud.io/sites/556628266e6f640eb3000000/138b043444ee6b5e381a27b2103d101a/jquery.mousewheel.js"></script>
<script type="text/javascript" src="http://assets.kodekloud.io/sites/556628266e6f640eb3000000/d8a09f82f02542971340c19ca00a3564/mallmaverick_svgmap.js"></script>


<script>
    $(document).ready(function() {
        
        
        function renderAll(){
            var stores = getStoresList();
            regions = {}
            $.each( stores , function( key, val ) {
                if(val.svgmap_region != null && typeof(val.svgmap_region)  != 'undefined'){
                    obj = {};
                    obj["tooltip"] = "<div class='tooltip_div'><p class='tooltip_name'>"+val.name+"</p></div>"
                    obj["attr"] = {}
                    obj["attr"]["href"] = "/stores/"+val.slug
                    regions[val.svgmap_region] = obj
                }
            });
            renderPageData("#store_select_container","#store_select_template",stores, "stores")
            $(".loading_overlay").hide();    
        }
        
        loadMallDataCached(renderAll);  
    })
    
</script>